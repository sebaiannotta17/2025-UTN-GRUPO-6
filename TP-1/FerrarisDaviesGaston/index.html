<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trabajo Práctico N°1</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="header">
        <img src="../publi/logo.jpg" alt="Logo" class="logo">
        <h1>Trabajo Práctico N°1 - Ferraris Davies, Gastón</h1>
    </header>
    <main class="main">
        <aside class="aside">
            <nav>
                <ul class="lista">
                    <li class="lista-item"><a class="lista-item-a" href="/pages/peleas.html">Información de peleadores</a></li>
                    <li class="lista-item"><a class="lista-item-a" href="#" id="random-driver-link">Piloto de F1 Random</a></li>
                </ul>
            </nav>
        </aside>
        <div class="container">
            <div id="driver-info" class="driver-info" style="display: none;">
                <div class="driver-header">
                    <div class="driver-image-container">
                        <img id="driver-image" src="" alt="Foto del piloto" class="driver-image">
                    </div>
                    <div class="driver-details">
                        <h2 id="driver-name"></h2>
                        <p class="driver-number" id="driver-number"></p>
                        <p class="driver-team" id="driver-team"></p>
                        <div class="driver-stats">
                            <p>Nacionalidad: <span id="driver-nationality"></span></p>
                            <p>Edad: <span id="driver-age"></span></p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="loading" class="loading" style="display: none;">
                <p>Buscando piloto...</p>
            </div>
            <div id="default-content">
                <p class="frase-aleatoria" id="frase-aleatoria"></p>
                <p class="container-text">Mi expectativa en la cátedra es aprender sobre desarrollo web y crear aplicaciones web interesantes.</p>
            </div>
        </div>
    </main>

    <footer class="footer">
        <p class="footer-text">Desarrollo Web - 6/6/2025</p>
    </footer>
    <script src="script.js"></script>
    <script src="apiFighters.js"></script>
    <script src="apiDriver.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const randomDriverLink = document.getElementById('random-driver-link');
            const driverInfo = document.getElementById('driver-info');
            const defaultContent = document.getElementById('default-content');
            const loading = document.getElementById('loading');

            randomDriverLink.addEventListener('click', async (e) => {
                e.preventDefault();
                
                try {
                    loading.style.display = 'block';
                    driverInfo.style.display = 'none';
                    defaultContent.style.display = 'none';

                    const driver = await getRandomDriver();
                    
                    document.getElementById('driver-name').textContent = driver.name || 'Nombre no disponible';
                    document.getElementById('driver-number').textContent = `Número: ${driver.number || 'N/A'}`;
                    document.getElementById('driver-team').textContent = driver.team?.name || 'Equipo no disponible';
                    document.getElementById('driver-nationality').textContent = driver.nationality || 'N/A';
                    document.getElementById('driver-age').textContent = driver.birthdate ? 
                        `${new Date().getFullYear() - new Date(driver.birthdate).getFullYear()} años` : 'N/A';
                    document.getElementById('driver-image').src = driver.image || '../publi/default-driver.jpg';

                    driverInfo.style.display = 'block';
                } catch (error) {
                    console.error('Error:', error);
                    alert('Error al obtener el piloto. Por favor, intente nuevamente.');
                    defaultContent.style.display = 'block';
                } finally {
                    loading.style.display = 'none';
                }
            });
        });
    </script>
</body>
</html>