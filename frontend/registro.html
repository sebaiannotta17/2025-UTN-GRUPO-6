<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Registro | Marketplace</title>
  <link rel="stylesheet" href="./styles.css" />
  <style>.card{max-width:480px;margin:40px auto;padding:20px;border-radius:12px;background:#252532;border:1px solid #2a2d3d}</style>
</head>
<body>
  <header class="topbar"><div class="brand">Marketplace Materiales</div></header>

  <main>
    <section class="card">
      <h2>Crear cuenta</h2>
      <form id="form-reg">
        <input type="text" name="name" placeholder="Nombre" required />
        <input type="email" name="email" placeholder="Email" required />
        <input type="password" name="password" placeholder="Contraseña" required />
        <div class="form-buttons">
          <button type="submit" class="btn" id="btn-registrar">Registrarme</button>
          <a href="./login.html" class="btn ghost" style="text-decoration:none;display:inline-flex;align-items:center;justify-content:center;padding:10px 12px;">Volver</a>
        </div>
      </form>
      <div id="toast-container"></div>
    </section>
  </main>

  <script>
    const form = document.getElementById('form-reg');
    const toasts = document.getElementById('toast-container');
    function toast(m,e=false){const d=document.createElement('div');d.className='toast'+(e?' error':'');d.textContent=m;toasts.appendChild(d);setTimeout(()=>d.remove(),3000);}
    form.addEventListener('submit', e=>{
      e.preventDefault();
      const f = new FormData(form);
      const name = (f.get('name')||'').trim();
      const email = (f.get('email')||'').trim();
      if(!name || !email){ toast('Completá los datos', true); return; }
      // mock: guardamos user local (no contraseña real)
      const user = { id: Date.now(), name, email };
      localStorage.setItem('user', JSON.stringify(user));
      localStorage.setItem('token', 'local.' + btoa(email) + '.token');
      toast('✅ Registrado (modo mock). Redirigiendo...');
      setTimeout(()=> location.href = './busqueda.html', 800);
    });
  </script>
</body>
</html>
